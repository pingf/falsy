"use strict";angular.module("sw.plugin.xmlFormater",["sw.plugins"]).factory("xmlFormatter",["$q","$log",function(r,e){function t(t){e.debug("sw:execute","xmlFormater");var n=!1,u=r.defer(),o=t.headers&&t.headers()["content-type"];return o&&o.toLowerCase().indexOf("/xml")>0&&(t.data=a(t.data),n=!0),u.resolve(n),u.promise}function a(r){var e="",t=/(>)(<)(\/*)/g,a=0;return r=r.replace(t,"$1\r\n$2$3"),angular.forEach(r.split("\r\n"),function(r){var t=0,n="";r.match(/.+<\/\w[^>]*>$/)?t=0:r.match(/^<\/\w/)?0!==a&&(a-=1):t=r.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var u=0;a>u;u++)n+="    ";e+=n+r+"\r\n",a+=t}),e}return e.debug("sw:plugin","xmlFormater"),{execute:t}}]).run(["plugins","xmlFormatter",function(r,e){r.add(r.AFTER_EXPLORER_LOAD,e)}]);